---
author: 顾友福
title: 公共组件
date: 2021-09-16 09:28:38
permalink: /pages/b15003/
categories:
    - 基础框架
    - md
tags:
    -
---

::: note 强烈建议

1. 使用相同类型的内置组件代替 element 的组件
2. 将全局组件设置为`vscode`常用代码片段 方便使用

:::

## g-icon 图标组件
<div style='margin-top:20px'><Badge text="示例" type="tip" vertical="top"/></div>

::: demo
```html
<template>
	<g-icon icon="icon-a-ziyuan12" color="red" size="20"></g-icon>
	<g-icon icon="icon-a-ziyuan2" color="green" size="20"></g-icon>
</template>
```
:::

::: tip
集成了[remixicon](https://remixicon.com/)<br>
图标库[iconfont](https://www.iconfont.cn/)以 icon-开头<br>
支持本地 svg 图标 以 icon-开头<br>
网络图片 以 http | https 开头
:::

`Attributes`
| 参数 | 描述 | 类型 | 可选值 | 默认值 |
| ----- | -------------------------------------------------------------------------- | -------------- | ------ | ------ |
| icon | 图标名(本地图片和 iconfont 以 icon-开头,remixicon 不要 ri-,直接使用图标名) | String | | |
| size | 图标大小控制 | String, Number | | |
| color | 图标颜色控制(无法改变颜色时,使用 iconfont 去色功能) | | | |

<Badge text="代码片段" type="warning" vertical="top"/>
```json
"g-icon全局图标": {
	"body": [
		"<g-icon icon='$1' size='$2' color='$3'></g-icon>"
	],
	"prefix": "g-icon",
	"description": "g-icon全局图标"
}
```

## g-resize 监听 DOM 大小调整

<Badge text="示例" type="tip" vertical="top"/>
::: demo
```html
<template>
  <div class="border" style="position: relative">
    <el-tag type="success">宽： {{ width }}</el-tag>
    <el-tag type="success">高： {{ height }}</el-tag>
    <g-resize emit-on-mount @notify="handleResize"></g-resize>
  </div>
</template>
<script>
  export default {
    components: {},
    data() {
      return {
        width: 0,
        height: 0,
      }
    },
    watch: {},
    mounted() {},
    methods: {
      handleResize({ width, height }) {
        this.width = width
        this.height = height
      },
    },
  }
</script>

<style>
  .border {
    height: 100%;
    border: 1px solid #ccc;
  }
</style>
```
:::

::: warning
要监听的 dom 元素 必须为`static`以外的定位如`relative`
:::

`Attributes`
| 参数         | 描述                                                  | 类型     | 可选值 | 默认值 |
| :----------- | ----------------------------------------------------- | -------- | ------ | ------ |
| emitOnMount  | 首次是否返回宽高                                      | Boolean  |        | false  |
| ignoreWidth  | 忽略宽度                                              | Boolean  |        | false  |
| ignoreHeight | 忽略高度                                              | Boolean  |        | false  |
| @notify      | 监听 DOM 元素大小时触发的事件 返回值{ width, height } | Function |        |        |

<Badge text="代码片段" type="warning" vertical="top"/>
```json
"g-resize监听元素变化组件": {
	"body": [
		" <g-resize emit-on-mount @notify=\"handleResize\"></g-resize>"
	],
	"prefix": "g-resize",
	"description": "g-resize监听元素变化组件"
}
```

## g-dialog 对话框
::: demo
```html
<template>
  <div>
    <el-button type="text" @click="dialogVisible = true">
      点击打开 Dialog
    </el-button>
    <g-dialog
      :dialog-visible.sync="dialogVisible"
      width="500px"
      title="弹窗标题"
      @confirm="confirm"
    >
      <template slot="body"></template>
    </g-dialog>
  </div>
</template>
<script>
  export default {
    components: {},
    data() {
      return {
        dialogVisible: false,
      }
    },
    watch: {},
    mounted() {},
    methods: {
      confirm() {},
    },
  }
</script>
```
:::

::: tip
基于 element-Dialog 二次封装
支持 element-Dialog 原生方法
支持与 G-from 表单验证
:::

`Attributes`
| 参数           | 说明                                               | 类型 | 可选择 | 默认值 |
| ------------- | -------------------------------------------------- |-------| ------ | ------ |
| dialogVisible | 是否显示 Dialog，支持 .sync 修饰符                   | boolean | ——  | false |
| title         | Dialog 的标题，也可通过具名 slot （见下表）传入       | string | —— | —— |
| width         | Dialog 的宽度                                       | string | —— | 500px |
| showFooter    | 是否显示底部确认取消按钮                             | boolean | —— | true |
| center        | 是否对头部和底部采用居中布局                         | boolean | —— | false |
| form          | 与g-from连用时g-form的表单数据                      | object | —— | —— |
| isAutoClose   | 点击遮盖层和关闭按钮是否自动关闭弹窗                  | boolean | —— | true |
| buttonPositioning   | 底部按钮布局方式显示                           | string | flex-end/flex-start/center | flex-end |
| confirmName   | 修改确认按钮名称                                     | string | —— | 确认 |
| cancelName   | 修改取消按钮名称                                     | string | —— | 取消 |

`slot`
| 参数           | 说明                                               
| ------------- | --------------------------------------------------  |
| body   | Dialog 的内容                                               | 
| title  | Dialog 标题区的内容                                          | 
| footer | Dialog 按钮操作区的内容                                      | 

`Events`
| 事件名称           | 说明                                      | 回调参数 | 
| ------- | --------------------------------------------------  | -- |
| open    | Dialog 打开的回调                                    | —— |
| opened  | Dialog 打开动画结束时的回调                           | —— |
| close   | Dialog 关闭的回调                                    | —— |
| closed  | Dialog 关闭动画结束时的回调                           | —— |

<div><Badge text="代码片段" type="warning" vertical="top"/></div>

```json
"g-dialog对话框": {
    "prefix": "g-dialog",
    "body": [
      "<g-dialog",
      "  :dialog-visible.sync=\"dialogVisible\"",
      "  width=\"500px\"",
      "  title=\"弹窗标题\"",
      "  :form=\"formOpitons\"",
      "  @confirm=\"confirm\"",
      ">",
      "  <template slot=\"body\"></template>",
      "</g-dialog>"
    ],
    "description": "g-dialog对话框"
  },
```
