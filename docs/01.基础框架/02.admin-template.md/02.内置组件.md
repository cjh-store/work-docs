---
title: 内置组件
date: 2021-07-30 15:57:12
permalink: /pages/ee5fe8/
categories: 
  - 基础框架
  - md
tags: 
  - 
---

::: note 强烈建议

1. 使用相同类型的内置组件代替element的组件
2. 将全局组件设置为`vscode`常用代码片段 方便使用

::: 


## g-icon 图标组件

::: tip
集成了[remixicon](https://remixicon.com/)<br>
图标库[iconfont](https://www.iconfont.cn/)以icon-开头<br>
支持本地svg图标  以icon-开头<br>
网络图片 以http | https 开头
:::

| 参数    | 描述                                                         | 类型           | 可选值 | 默认值 |
| ------- | ------------------------------------------------------------ | -------------- | ------ | ------ |
| icon    | 图标名(本地图片和iconfont以icon-开头,remixicon不要ri-,直接使用图标名) | String         |        |        |
| size    | 图标大小控制                                                 | String, Number |        |        |
| color   | 图标颜色控制(无法改变颜色时,使用iconfont去色功能)            |                |        |        |

<Badge text="示例" type="tip" vertical="top"/>

::: demo 此处放置代码示例的描述信息，支持 `Markdown` 语法，**描述信息只支持单行**
```html
<template>
 <g-icon icon='icon-a-ziyuan12' color='red' size='20'></g-icon>
 <g-icon icon='icon-a-ziyuan2' color='green' size='20'></g-icon>
</template>
```
:::

<Badge text="代码片段" type="warning" vertical="top"/>

```json
"g-icon全局图标": {
	"body": [
		"<g-icon icon='$1' size='$2' color='$3'></g-icon>"
	],
	"prefix": "g-icon",
	"description": "g-icon全局图标"
}
```
## g-resize 监听 DOM 大小调整

::: warning
要监听的dom元素 必须为`static`以外的定位如`relative`
::: 

| 参数         | 描述             | 类型    | 可选值 | 默认值 |
| :----------- | ---------------- | ------- | ------ | ------ |
| emitOnMount  | 首次是否返回宽高 | Boolean |        | false  |
| ignoreWidth  | 忽略宽度         | Boolean |        | false  |
| ignoreHeight | 忽略高度         | Boolean |        | false  |
| @notify | 监听DOM 元素大小时触发的事件 返回值{ width, height }         | Function       |        |        |

<Badge text="示例" type="tip" vertical="top"/>
```html
 <g-resize emit-on-mount @notify="handleResize"></g-resize>
```
<Badge text="代码片段" type="warning" vertical="top"/>

```json
"g-resize监听元素变化组件": {
	"body": [
		" <g-resize emit-on-mount @notify=\"handleResize\"></g-resize>"
	],
	"prefix": "g-resize",
	"description": "g-resize监听元素变化组件"
}
```


## x-table 表格组件

::: tip
对vxe-table进行二次封装<br>
支持vxe-table所有原生属性和方法
:::


| 参数                          | 描述                                                       | 类型            | 可选值 | 默认值 |
| :---------------------------- | ---------------------------------------------------------- | --------------- | ------ | ------ |
| tableOption                   | 表格基础配置                                               | Object          |        |        |
| tableOption.ref               | 表格实例(定义好后,后面可以直接通过tableOption.ref调用组件) |                 |        | ' '    |
| tableOption.border            | 表格border(同vxe-tabel)                                    | String, Boolean |        | true   |
| tableOption.isBaseHeight      | 表格是否拥有基础高度                                       | Boolean         |        | true   |
| tableOption.ref               | 表格实例(定义好后,后面可以直接通过tableOption.ref调用组件) |                 |        | ' '    |
| tableOption.tableData         | 表格数据(默认空数组,后面通过接口获取数据进行赋值)          | Array           |        |        |
| tableOption.column            | 表格列配置                                                 | Array           |        |        |
| tableOption.column.prop       | 列要展示的字段                                             | String          |        |        |
| tableOption.column.label      | 列的标题                                                   |                 |        |        |
| tableOption.column.width      | 列的宽度(支持百分比和px)                                   |                 |        |        |
| tableOption.column.slot       | 是否自定义列(通过插槽方式自定义列)                         | Boolean         |        | false  |
| tableOption.column.filters    | 筛选 具体配置参考vxe-table                                 |                 |        |        |
| tableOption.column.noMultiple | 筛选是否支持多选                                           | Boolean         |        | false  |
| tableOption.column.formatter  | 格式化函数,同vxe-table formatter(支持全局混入的formats)    | String          |        | false  |
| tableOption.column.tooltip    | 溢出显示省略号                                             | Boolean         |        | false  |
| tableOption.column.slot       | 是否自定义列(通过插槽方式自定义列)                         | Boolean         |        | false  |

<Badge text="示例" type="tip" vertical="top"/>
```html
 见x-table和x-page混合使用
```
<Badge text="代码片段" type="warning" vertical="top"/>
<code-group>
  <code-block title="html" active>
  ```json
    "x-table表格": {
    "prefix": "x-table",
    "body": [
      "<x-table :table-option=\"tableOption\">",
      "  <template #cz=\"{ row }\">",
      "    <el-button type=\"text\" @click=\"configurationRole('edit')\">",
      "      配置",
      "    </el-button>",
      "    <el-button type=\"text\" @click=\"deleteRole(row)\">删除</el-button>",
      "  </template>",
      "</x-table>"
    ],
    "description": "x-table表格"
  },
  ```
  </code-block>

  <code-block title="js">
  ```json
    "x-table表格数据": {
    "prefix": "x-table",
    "body": [
      "tableOption: {",
      "  tableData: [],",
      "  column: [",
      "    {",
      "      prop: 'name',",
      "      label: '名称',",
      "    },",
      "    {",
      "      prop: 'cz',",
      "      label: '操作',",
      "      slot: true,",
      "    },",
      "  ],",
      "},"
    ],
    "description": "x-table表格数据"
  },
  ```
  </code-block>

</code-group>

## x-page分页组件

::: tip
对vxe-page进行二次封装<br>
支持vxe-page所有原生属性和方法
:::

| 参数                 | 描述                           | 类型     | 可选值            | 默认值         |
| :------------------- | ------------------------------ | -------- | ----------------- | -------------- |
| align                | 分页对齐方式                   | String   | left,center,right | center         |
| pageOption           | 分页参数配置                   | Object   |                   |                |
| pageOption.page      | 页码                           | Number   |                   |                |
| pageOption.page_size | 每页数量                       | Number   |                   |                |
| pageOption.total     | 总数量                         | Number   |                   |                |
| layouts              | 包含的组件（同vxe-table page） | Array    |                   | 见组件内部定义 |
| @change              | 分页发生改变                   | Function |                   | 见组件内部定义 |

<Badge text="示例" type="tip" vertical="top"/>
```html
 见x-table和x-page混合使用
```
<Badge text="代码片段" type="warning" vertical="top"/>

```json
  "x-page分页": {
    "prefix": "x-page",
    "body": [
      "<x-page",
      "  :page-option=\"pageOption\"",
      "  :layouts=\"['PrevPage', 'Number', 'NextPage']\"",
      "  @change=\"pageChange\"",
      "></x-page>"
    ],
    "description": "x-page分页"
  },
```


 ## x-table和x-page混合使用
<br>
<Badge text="基础示例" type="tip" vertical="middle"/>
<br>
<br>

<code-group>
  <code-block title="vue" active>
  ```html
<x-table :table-option="tableOption">
    <template #cz="{ row }">
    <el-button type="text" @click="configurationRole('edit')">
        配置
    </el-button>
    <el-button type="text" @click="deleteRole(row)">删除</el-button>
    </template>
</x-table>
<x-page
    :page-option="pageOption"
    :layouts="['PrevPage', 'Number', 'NextPage']"
    @change="pageChange"
></x-page>
  ```
  </code-block>

  <code-block title="js">
  ```js
  import { getList } from '@/api/common'
  export default {
    data() {
      return {
        pageOption: { page: 1, page_size: 10, total: 0 },
        tableOption: {
          tableData: [],
          column: [
            {
              prop: 'name',
              label: '名称',
            },
            {
              prop: 'cz',
              label: '操作',
              slot: true,
            },
          ],
        },
      }
    },
    created() {
      this.getList()
    },
    methods: {
      getList() {
        getList({ ...this.pageOption }).then(({ data }) => {
          this.tableOption.tableData = data.list
          this.pageOption.total = data.total
        })
      },
      pageChange() {
        this.getList()
      },
    },
  }
  ```
  </code-block>

</code-group>

<br>
<Badge text="复杂示例" type="tip" vertical="middle"/>
<br>

::: note 包含
 异步筛选，排序，自定义插槽，vxe-table原生事件支持
::: 


 <code-group>
   <code-block title="vue" active>
   ```html
   <x-table
         :table-option="tableOption" # 关键p
         :sort-config="{ remote: true }" # 排序配置 
         @sort-change="filterChange" # 排序事件
         @filter-change="filterChange" # 筛选事件
         @cell-click="cellClickEvent" # cell点击事件
       >
       <template #new_file_name="{ row }">
           <g-icon
                   class="m-r-5"
                   icon="icon-shijuan"
                   :color="themes.blue"
                   size="25"
                   ></g-icon>
           <span>{{ row.new_file_name }}</span>
       </template>
       <template #paper_type="{ row }">
           <el-tag v-if="row.paper_type == 2" type="info" effect="dark">
               答题卡
           </el-tag>
       </template>
       <template #correction="{ row }">{{row.correction}}</template>
       <template #exam_start_time="{ row }">
           {{ row.exam_start_time }}
       </template>
   </x-table>
   <x-page :page-option="pageOption" @change="pageChange"></x-page>
   ```
   </code-block>

   <code-block title="js">
   ```js
   import { getScanExamList } from '@/api/manage'
   import { getTheTeacherSGradeClassDiscipline } from '@/api/common'
   
   export default {
       data() {
           return {
               tableOption: {
                   ref:'',// 表格实例 方便调用
                   tableData: [],
                   column: [
                       {
                           prop: 'new_file_name',
                           label: '试卷名称',
                           slot: true,
                           width: '30%',
                       },
                       {
                           prop: 'paper_type',
                           label: '',
                           slot: true,
                           width: '10%',
                       },
                       {
                           prop: 'student_number',
                           label: '人数',
                           width: '10%',
                           align: 'center',
                       },
                       {
                           prop: 'exam_type_name',
                           label: '类型',
                           align: 'center',
                           width: '10%',
                       },
                       {
                           prop: 'class_name',
                           label: '班级',
                           align: 'center',
                           width: '15%',
                           filters: [],
                           noMultiple: true,
                       },
                       {
                           prop: 'correction',
                           label: '修正人数',
                           align: 'center',
                           width: '10%',
                           slot: true,
                       },
                       {
                           prop: 'exam_start_time',
                           label: '考试时间',
                           align: 'center',
                           width: '15%',
                           sort: true,
                       },
                   ],
               },
               // 要筛选的字段
               filterForm: {
                   sort: '',// 排序方式 正序，倒序
                   class_id: '',// 班级
               },
               // 分页配置
               pageOption: { page: 1, page_size: 10, total: 0 },
           }
       },
       created() {
           this.getScanExamList() // 获取试卷列表
       },
       async mounted() {
           // 获取筛选班级
           await this.getTheTeacherSGradeClassDiscipline()
       },
       methods: {
           // 单元格点击跳转路由
           cellClickEvent({ row, rowIndex, column, columnIndex }) {
               this.$router.push({
                   path: '/manage/scanCorrect/details',
                   query: {
                       id: row.exam_id,
                       unified_exam_id: row.unified_exam_id,
                   },
               })
           },
           getScanExamList() {
               getScanExamList({ ...this.pageOption, ...this.filterForm }).then(
                   ({ data }) => {
                       this.tableOption.tableData = data.list
                       this.pageOption.total = data.total
                   }
               )
           },
           // 分页改变重新请求
           pageChange() {
               this.getScanExamList()
           },
           // 表格筛选项更新
           async getTheTeacherSGradeClassDiscipline() {
               await getTheTeacherSGradeClassDiscipline().then(({ data }) => {
                   // 后台返回筛选项 进行组装
                   let filters = data.map((e) => {
                       return {
                           label: e.grade_name + e.class_name,
                           value: e.class_id,
                       }
                   })
                   // 拿到表格实例
                   const xTable = this.tableOption.ref
                   // 设置字段筛选项
                   xTable.setFilter('class_name', filters)
                   xTable.updateData()
               })
           },
           // 表格筛选
           filterChange({ property, values, order }) {
               const filterObj = {
                   exam_start_time: 'sort',
                   class_name: 'class_id',
               }
               let data = values || order
               this.filterForm[filterObj[property]] = String(data)
               // 每次筛选 重置页码为1
               this.pageOption.page = 1
               this.getScanExamList()
           },
       },
   }
   ```
   </code-block>

 </code-group>


## g-dialog 对话框








